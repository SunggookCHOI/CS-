# RDBMS 와 NoSQL

## RDBMS
### 트랜잭션
RDBMS에서 데이터베이스는 테이블이 기본 단위이며 테이블은 행과 열로 이루어져있다.(그냥 표를 생각하면 된다.)<br>
RDBMS의 가장 큰 특징은 견고성으로 작업 중 에러가 발생했을 시, 원래의 상태로 되돌아가야 한다. 이러한 견고성을 유지하면서도 효율적으로 작업하기 위해 RDBMS는 반드시 ACID 트랜잭션을 사용한다. <br><br>

1. 원자성(Atomicity) <br>
 원자성 트랜잭션이란 더이상 줄이거나 나눌 수 없는 가장 작은 작업의 단위로, 오류나 어떤 상황으로 인해 작업의 일부분만 데이터베이스에 적용되는 것을 방지한다. all occur, or nothing occurs, 즉, 어느 시점을 기준으로 아직 수행되지 않았거나, 이미 수행되었거나 두가지 상태만이 존재한다. (진행 중 이라는 것은 존재하지 않는다.) <b>커밋 도중 에러가 나면 커밋이 되지 않은 상태로 돌아간다.(일부만 반영되는 경우는 없다.)</b><br><br>

 2. 일관성(Consistency) <br>
> 일관성이란 트랜잭션이 허용된 방법에 의해서만 데이터를 바꿀수 있음을 의미한다. 즉, 제약조건, 트리거 등 정해진 모든 규칙 내에서만 데이터의 변경이 가능하다. <br><br>

 3. 독립성(Isolation) <br>
> 독립성이란 동시에 일어나는 트랜잭션에 대처하기 위한 개념으로, 한 작업에 의한 변화가 언제 다른 유저에게 보여지게 될 지를 결정한다. 예를 들어, 한 유저가 select하고 있을 때, 다른 유저가 update하는 경우 update를 언제 어떻게 반영할 것인지를 결정한다.<br><br>

 4. 지속성(Durability) <br>
> 한번 커밋되면, 어떤 오류가 발생하더라도 커밋된 상태가 유지되어야한다.(심지어 시스템 전원이 내려가더라도) <br><br>

위와 같이, RDBMS는 스키마의 엄격함(데이터 무결성) 외에도 많은 특징들을 가지고 있으며, 위의 NoSQL의 경우에는 성능 향상의 위해 위의 내용 중 몇가지를 포기한다. <br>
또한, RDBMS의 경우 데이터의 중복을 피하기 위해 데이터들을 정규화 한 후, 테이블을 서로 관계 맺는다. 이로부터 데이터 관리의 편의성도 얻을 수 있다. <br>
RDBMS는 이 ACID를 모두 만족시키며, 이를 위해 분산 처리 등 많은 부분을 희생한다. 나쁘다는 의미가 아니라 ACID가 성능을 희생할 정도로 가치가 있는 일이다. <br><br>

## NoSQL
현대에는 데이터 양이 매우 많아지면서 RDBMS만으로 처리하기에는 한계가 있어 새로운 기술이 필요해졌으며, 이것이 NoSQL이다. NoSQL은 방대한 데이터를 처리하기 위해 ACID 중 일부 기능을 포기하기도 한다. ACID의 일부를 포기함으로서 분산처리, 유연한 스키마 등의 이점을 얻는다.<br>
NoSQL의 경우에는 RDBMS와 달리 스키마가 유연하다. 즉, 테이블 구조가 정해져 있지 않으며, 새로운 열을 추가하는 것도 가능하다. 또한, 구조가 정해져 있지 않기에 데이터를 정규화해서 서로 연관지어줄 필요가 없다. (예를 들면, 어떤 열이 유저 속성을 가질 수 있다면 RDB에서는 유저 테이블을 따로 만든 후 매핑테이블로 연결해 주겠지만, NoSQL의 경우에는 유저를 JSON(예를들면, 엘라스틱서치나 몽고DB) 형태로 만들어 속성으로 추가시켜주면 된다. 즉, join 역시 불필요하다. <br><br>

### CAP ?  <b>공부가 더 필요</b>
일관성(Consistency), 가용성(Availability), 분할내성(Partition tolerance) 세가지를 동시에 만족시키는 분산 시스템은 존재하지 않는다. 
1. 일관성 : 모든 요청은 최신(가장 최근에 <b>쓰여진</b>) 데이터 또는 최신 에러를 받는다. <br>
2. 가용성 : 모든 요청은 응답을 받을 수 있다.(응답이 최신 데이터가 아닐 수도 있다.) <br>
3. 분할내성 : 노드 간의 네트워크에 의해 데이터 전송이 실패하거나 지연되어도 시스템은 계속 작동한다. -> 노드 사이의 데이터 누락이 허용된다 가 더 좋은 정의라고 한다.(따라서 분할용인이라는 번역이 더 맞다고 하는 블로그도 있다.) <br><br>
보통 이 중 2가지를 만족하는데, RDBMS의 경우에는 보통 CA이나, 각기 다르다. <br>
<b>이래저래 논란이 많은 개념인듯...</b>

### 확장
RDBMS 같은 경우는 Scale up, 즉, 하드의 성능을 올리는 식으로 확장이 가능하다.<br>
반면 NoSQL 같은 경우는 Scale out, 즉, 클러스터를 늘리는 식으로의 확장도 가능하다(분산처리).

<hr><hr>
Todo : ES의 역인덱싱 원리
